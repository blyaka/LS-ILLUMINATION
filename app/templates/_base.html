{% load static %}
{% load categories_tags %}


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% block title %}
    <title>LS-ILLIMINATOIN</title>
    {% endblock title %}


    <link rel="stylesheet" href="{% static 'css/base.css' %}">


    {% block styles %}

    {% endblock styles %}

</head>

<body>

    <header class="ls-header">
        <div class="ls-header__inner">
            <a class="ls-logo" href="{% url 'home' %}">
                <img src="{% static 'images/logo.png' %}" alt="LS Illumination">
                <span class="ls-logo__brand">LS ILLUMINATION</span>
                <i class="ls-logo__sep"></i>
                <span class="ls-logo__ru">СВЕТОВЫЕ РЕШЕНИЯ</span>
            </a>

            <nav class="ls-nav">
                <a href="#" class="ls-nav__btn" id="pfOpen" aria-controls="pfPanel" role="button">Портфолио</a>
                <a href="#">Контакты</a>
                <a href="{% url 'about' %}">О нас</a>
            </nav>

            <a class="ls-cta" href="#request">Оставить заявку</a>
        </div>
    </header>

    <div class="pf-underlay" id="pfUnderlay" hidden></div>

    <section class="pf-panel" id="pfPanel" role="dialog" aria-modal="true" hidden>
        <div class="pf-panel__glass">
            <div class="pf-grid">
            {% for row in categories|chunk_categories %}
                <div class="pf-grid pf-grid--{{ row|length }}">
                {% for cat in row %}
                    <a class="pf-card" href="#">
                    <img src="{{ cat.icon.url }}" alt="{{ cat.name }}">
                    <span>{{ cat.name }}</span>
                    </a>
                {% endfor %}
                </div>
            {% endfor %}
            </div>

            <div class="pf-grabber" aria-hidden="true"></div>
        </div>
    </section>





    {% block content %}

    {% endblock content %}


    <footer class="ls-footer">
        <a href="">Пользовательское соглашение</a>
        <a href="">Политика конфиденциальности</a>
        <a href="">© LS illumination, 2009-2025</a>
        <a href="">by</a>
    </footer>

</body>


<script>
    (() => {
        const header = document.querySelector('header');
        const trigger = document.getElementById('pfOpen');      // <-- одно имя
        const panel = document.getElementById('pfPanel');
        const under = document.getElementById('pfUnderlay');

        function place() {
            const h = header?.getBoundingClientRect().height || 0;
            under.style.top = h + 'px';
            panel.style.height = `calc(100dvh - ${h}px)`;
            under.style.height = `calc(100dvh - ${h}px)`;
        }

        function open() {
            place();
            panel.hidden = false; under.hidden = false;
            panel.getBoundingClientRect();                        // reflow
            panel.classList.add('show'); under.classList.add('show');
        }

        function close() {
            panel.classList.remove('show'); under.classList.remove('show');
            const done = () => { panel.hidden = true; under.hidden = true; panel.removeEventListener('transitionend', done); };
            panel.addEventListener('transitionend', done);
        }

        trigger.addEventListener('click', (e) => {
            e.preventDefault();
            (panel.hidden || !panel.classList.contains('show')) ? open() : close();
        });

        under.addEventListener('click', close);
        document.addEventListener('keydown', e => { if (e.key === 'Escape' && !panel.hidden) close(); });
        window.addEventListener('resize', place);
    })();
</script>




</html>